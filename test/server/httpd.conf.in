PidFile httpd.pid
Timeout 300
KeepAlive Off
MaxKeepAliveRequests 100
KeepAliveTimeout 15
ServerName localhost

# Failure to do this will cause zombie servers (for testsuite use only) --sgp
LockFile         accept.lck
AcceptMutex      fcntl

# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
MaxClients       150
MaxRequestsPerChild  0
</IfModule>

# worker MPM
# StartServers: initial number of server processes to start
# MaxClients: maximum number of simultaneous client connections
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule worker.c>
StartServers         2
MaxClients         150
MinSpareThreads     25
MaxSpareThreads     75 
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule>

#
# Listen: Allows you to bind Apache to specific IP addresses and/or
# ports, in addition to the default. See also the <VirtualHost>
# directive.
#
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses (0.0.0.0)
#

Listen 0.0.0.0:@PORT@

# ServerAdmin: Your address, where problems with the server should be
# e-mailed.  This address appears on some server-generated pages, such
# as error documents.  e.g. admin@your-domain.com
#
ServerAdmin root@localhost

LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule python_module modules/mod_python.so
LoadModule alias_module modules/mod_alias.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule cgi_module modules/mod_cgi.so

DocumentRoot "@DOCROOT@"

Alias /conary/ "@DOCROOT@/test.cnr/"

Alias /conary-static/apps/yui/      "/srv/www/html/yui/"
Alias /conary-static/apps/MochiKit/ "/srv/www/html/MochiKit/"
Alias /conary-static/apps/mint/     "@CONTENTPATH@/"
Alias /jsonrpc/                     "@DOCROOT@/rbuilder.conf/"
Alias /xmlrpc/                      "@DOCROOT@/rbuilder.conf/"
Alias /xmlrpc-private/              "@DOCROOT@/rbuilder.conf/"
Alias /images/                      "@IMAGESPATH@/"
Alias /cgi-bin/                     "@SCRIPTSPATH@/"
Alias /                             "@DOCROOT@/rbuilder.conf/"

<Location />
    AddHandler python-program .conf
    PythonHandler mint.web.hooks
    PythonOption rbuilderConfig "@DOCROOT@/rbuilder.conf"
    PythonOption basePath "/"
    PythonPath "['@MINTPATH@', '@MCPPATH@', '@PRODDEFPATH@', '@CONARYPATH@', '@PCREATORPATH@'] + sys.path"
    PythonDebug Off
</Location>

<Location /xmlrpc/>
    AddHandler python-program .conf
    PythonOption rbuilderConfig "@DOCROOT@/rbuilder.conf"
    PythonHandler mint.web.rpchooks
</Location>

<Location /xmlrpc-private/>
    AddHandler python-program .conf
    PythonHandler mint.web.rpchooks
    PythonOption rbuilderConfig "@DOCROOT@/rbuilder.conf"
    PythonOption allowPrivate True
</Location>

<Location /jsonrpc/>
    AddHandler python-program .conf
    PythonOption rbuilderConfig "@DOCROOT@/rbuilder.conf"
    PythonHandler mint.web.rpchooks
</Location>


<Location /conary/>
    Options FollowSymLinks

    AddHandler python-program .cnr
    PythonHandler conary.server.apachehooks
</Location>

<Location /images/>
    SetHandler none
    DefaultType application/octet-stream
    AddType application/octet-stream .iso .img
</Location>

<Location /cgi-bin/>
    AddHandler cgi-script .cgi
</Location>

<Directory @SCRIPTSPATH@/>
    Options +ExecCGI
</Directory>


# TypesConfig describes where the mime.types file (or equivalent) is
# to be found.
#
TypesConfig /etc/mime.types

ErrorLog error_log
LogLevel debug

LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog access_log combined
