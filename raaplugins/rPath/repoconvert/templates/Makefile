#
# Copyright (c) 2005-2006 rPath, Inc.
#
# All rights reserved
#

all: default-all default-subdirs

SUBDIRS = 

python_files = __init__.py

kid_files = index.kid

extra_files = Makefile

dist_files = $(python_files) $(extra_files) $(kid_files)

generated_files = *.pyo *.pyc

.PHONY: clean dist install subdirs

subdirs: default-subdirs

install: all install-subdirs pyfiles-install kidfiles-install
	$(PYTHON) -c "import compileall; compileall.compile_dir('$(DESTDIR)$(pluginsdir)', ddir='$(pluginsdir)', quiet=1)"
	$(PYTHON) -OO -c "import compileall; compileall.compile_dir('$(DESTDIR)$(pluginsdir)', ddir='$(pluginsdir)', quiet=1)"

kidfiles-install:
	kidc --strip-dest-dir $$(pwd) $(kid_files)
	mkdir -p $(DESTDIR)$(pluginsdir)$(DIR)
	for f in $(kid_files) *.pyc; do \
		cp -a $$f $(DESTDIR)$(pluginsdir)$(DIR)/$$f; \
	done

dist: default-dist

clean: clean-subdirs default-clean

include ../../Make.rules
